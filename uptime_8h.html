<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BSP430: include/bsp430/utility/uptime.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20130325</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b88edee3dd3c84f98132ff53401cb3f9.html">bsp430</a></li><li class="navelem"><a class="el" href="dir_3a342b515484da5d2be804b4d00fb40f.html">utility</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">uptime.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Support for maintaining a system uptime counter.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="timer_8h_source.html">bsp430/periph/timer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="clock_8h_source.html">bsp430/clock.h</a>&gt;</code><br/>
</div>
<p><a href="uptime_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9d11620036fe41e9f4fca30676e4d821"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a9d11620036fe41e9f4fca30676e4d821">configBSP430_UPTIME</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a9d11620036fe41e9f4fca30676e4d821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a8d2483ccc30c355cae2f3be6ad547"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#aa3a8d2483ccc30c355cae2f3be6ad547">BSP430_UPTIME</a>&#160;&#160;&#160;include &lt;bsp430/platform.h&gt;</td></tr>
<tr class="separator:aa3a8d2483ccc30c355cae2f3be6ad547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbfb3c88912e050b4bb58950f824522c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#acbfb3c88912e050b4bb58950f824522c">BSP430_UPTIME_TIMER_PERIPH_CPPID</a>&#160;&#160;&#160;include &quot;bsp430_config.h&quot;</td></tr>
<tr class="separator:acbfb3c88912e050b4bb58950f824522c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4b3ca225b4057be8a5c6f05de6eb7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a>&#160;&#160;&#160;platform or application specific</td></tr>
<tr class="separator:a6d4b3ca225b4057be8a5c6f05de6eb7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa14b0b52fb6f36c07294924bea45b36a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__config__functional.html#gaa14b0b52fb6f36c07294924bea45b36a">configBSP430_UPTIME_TIMER_HAL_CC0_ISR</a>&#160;&#160;&#160;indirectly defaulted</td></tr>
<tr class="separator:gaa14b0b52fb6f36c07294924bea45b36a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7accd9ef2adfde0ee3c88d5888e1d616"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a7accd9ef2adfde0ee3c88d5888e1d616">BSP430_UPTIME_TASSEL</a>&#160;&#160;&#160;TASSEL_1 /* == TASSEL__ACLK */</td></tr>
<tr class="separator:a7accd9ef2adfde0ee3c88d5888e1d616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae58cb708c91abec9973d8a4ae912cea8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#ae58cb708c91abec9973d8a4ae912cea8">BSP430_UPTIME_DIVIDING_SHIFT</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ae58cb708c91abec9973d8a4ae912cea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a463e61b338971a18298935cfca570eb4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a463e61b338971a18298935cfca570eb4">BSP430_UPTIME_MS_TO_UTT</a>(ms_)&#160;&#160;&#160;<a class="el" href="core_8h.html#a9316a29a4688017236770d501848fa18">BSP430_CORE_MS_TO_TICKS</a>((ms_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td></tr>
<tr class="separator:a463e61b338971a18298935cfca570eb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cde1e0939c712781836c79428c5996d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a3cde1e0939c712781836c79428c5996d">BSP430_UPTIME_UTT_TO_MS</a>(utt_)&#160;&#160;&#160;<a class="el" href="core_8h.html#a5c82432f5b308110619c93d2ee32e892">BSP430_CORE_TICKS_TO_MS</a>((utt_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td></tr>
<tr class="separator:a3cde1e0939c712781836c79428c5996d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9ae9139f8a4415f489870b8b07f3eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a7f9ae9139f8a4415f489870b8b07f3eb">BSP430_UPTIME_US_TO_UTT</a>(us_)&#160;&#160;&#160;<a class="el" href="core_8h.html#a219559446b71e4adfab17e300c0c1ecb">BSP430_CORE_US_TO_TICKS</a>((us_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td></tr>
<tr class="separator:a7f9ae9139f8a4415f489870b8b07f3eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9287c5663ef4d656b76bbb3ece7b7658"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a9287c5663ef4d656b76bbb3ece7b7658">BSP430_UPTIME_UTT_TO_US</a>(utt_)&#160;&#160;&#160;<a class="el" href="core_8h.html#a3f5213f6fd15b49cb3a6e0b511ba6787">BSP430_CORE_TICKS_TO_US</a>((utt_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td></tr>
<tr class="separator:a9287c5663ef4d656b76bbb3ece7b7658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae47d677ac9443e2e26608ef5278f1a6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#ae47d677ac9443e2e26608ef5278f1a6d">BSP430_UPTIME_AS_TEXT_LENGTH</a>&#160;&#160;&#160;sizeof(&quot;HHH:MM:SS.mmm&quot;)</td></tr>
<tr class="separator:ae47d677ac9443e2e26608ef5278f1a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb0fd811e867799ad7873f867c67dbd3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:adb0fd811e867799ad7873f867c67dbd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc74e7198f189c84941a73c523863191"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#abc74e7198f189c84941a73c523863191">BSP430_UPTIME_DELAY_CCIDX</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:abc74e7198f189c84941a73c523863191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d852ee2f8f7ec9a52e542cbf8d57c27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a5d852ee2f8f7ec9a52e542cbf8d57c27">BSP430_UPTIME_DELAY_MS_NI</a>(delay_ms_, lpm_bits_, exit_expr_)</td></tr>
<tr class="separator:a5d852ee2f8f7ec9a52e542cbf8d57c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9dea5efac11cf472a643af6c03929fdf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> <br class="typebreak"/>
<a class="el" href="timer_8h.html#a05821bb5b9c3c49fbc7ced58b7a4eaa8">hBSP430halTIMER</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a9dea5efac11cf472a643af6c03929fdf">hBSP430uptimeTimer</a> (void)</td></tr>
<tr class="separator:a9dea5efac11cf472a643af6c03929fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee524dac4c6d777b5493f1c16bc1c2a"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#abee524dac4c6d777b5493f1c16bc1c2a">ulBSP430uptimeConversionFrequency_Hz_ni</a> (void)</td></tr>
<tr class="separator:abee524dac4c6d777b5493f1c16bc1c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bacc5bf6eeb96037f3470fa3ac9c5c"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#aa3bacc5bf6eeb96037f3470fa3ac9c5c">ulBSP430uptimeSetConversionFrequency_ni</a> (unsigned long frequency_Hz)</td></tr>
<tr class="separator:aa3bacc5bf6eeb96037f3470fa3ac9c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4b2fa8646bfd0856d6a9b095db30e93"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> <br class="typebreak"/>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#ab4b2fa8646bfd0856d6a9b095db30e93">ulBSP430uptime_ni</a> (void)</td></tr>
<tr class="separator:ab4b2fa8646bfd0856d6a9b095db30e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0b8aeba63d7b2ce965a650125eb8ef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> <br class="typebreak"/>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a7e0b8aeba63d7b2ce965a650125eb8ef">ulBSP430uptime</a> (void)</td></tr>
<tr class="separator:a7e0b8aeba63d7b2ce965a650125eb8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ac7fe1f205bed2b6e8e41faa8a43bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#af2ac7fe1f205bed2b6e8e41faa8a43bc">vBSP430uptimeStart_ni</a> (void)</td></tr>
<tr class="separator:af2ac7fe1f205bed2b6e8e41faa8a43bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62fc249f2c4699ab77b408e3488ca4b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a62fc249f2c4699ab77b408e3488ca4b5">vBSP430uptimeSuspend_ni</a> (void)</td></tr>
<tr class="separator:a62fc249f2c4699ab77b408e3488ca4b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8e943e205552a5c9aa1532ca1347b0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#af8e943e205552a5c9aa1532ca1347b0b">vBSP430uptimeResume_ni</a> (void)</td></tr>
<tr class="separator:af8e943e205552a5c9aa1532ca1347b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb1310c769f028347010502456fb918"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a1cb1310c769f028347010502456fb918">xBSP430uptimeAsText</a> (unsigned long duration_utt, char *buffer)</td></tr>
<tr class="separator:a1cb1310c769f028347010502456fb918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a790fc3c41c4a8e93ec7caca7825733c1"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a790fc3c41c4a8e93ec7caca7825733c1">xBSP430uptimeAsText_ni</a> (unsigned long duration_utt)</td></tr>
<tr class="separator:a790fc3c41c4a8e93ec7caca7825733c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b46df1d5bcff71178146409ae0baffa"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a2b46df1d5bcff71178146409ae0baffa">lBSP430uptimeSleepUntil_ni</a> (unsigned long setting_utt, unsigned int lpm_bits)</td></tr>
<tr class="separator:a2b46df1d5bcff71178146409ae0baffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6478a3b6c67d2b0d1cee284f7d69c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uptime_8h.html#a6c6478a3b6c67d2b0d1cee284f7d69c3">iBSP430uptimeDelaySetEnabled_ni</a> (int enablep)</td></tr>
<tr class="separator:a6c6478a3b6c67d2b0d1cee284f7d69c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support for maintaining a system uptime counter. </p>
<p>This module provides routines to initialize and query a long-term clock, using a platform-selected timer sourced by an undivided ACLK.</p>
<p><a class="el" href="uptime_8h.html#af2ac7fe1f205bed2b6e8e41faa8a43bc">vBSP430uptimeStart_ni()</a> must be invoked on hardware initialization after configuring the system clocks. This is done for you in <a class="el" href="platform_8h.html#a616515ce5e0f7635ca36a815841d2a21">vBSP430platformInitialize_ni()</a> if <a class="el" href="uptime_8h.html#a9d11620036fe41e9f4fca30676e4d821">configBSP430_UPTIME</a> is true.</p>
<p>Normally <a class="el" href="timer_8h.html#a2f1f35990892a20c7ace8c88a1dce998">BSP430_PERIPH_TA0</a> is used for this function, but see <a class="el" href="uptime_8h.html#acbfb3c88912e050b4bb58950f824522c">BSP430_UPTIME_TIMER_PERIPH_CPPID</a> if you want to select a different timer.</p>
<dl class="section warning"><dt>Warning</dt><dd>The capture/compare register for <a class="el" href="timer_8h.html#ad8183989e9233a73453351037bc04c29">BSP430_TIMER_VALID_COUNTER_READ_CCIDX</a> is reserved for use in overflow management. Do not use or reconfigure this register.</dd></dl>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2013, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aa3a8d2483ccc30c355cae2f3be6ad547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME&#160;&#160;&#160;include &lt;bsp430/platform.h&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined to a true value if <a class="el" href="uptime_8h.html#acbfb3c88912e050b4bb58950f824522c">BSP430_UPTIME_TIMER_PERIPH_CPPID</a> has been provided, making the uptime infrastructure available.</p>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#a9d11620036fe41e9f4fca30676e4d821">configBSP430_UPTIME</a> </dd></dl>
<dl class="section user"><dt>Platform-Dependent Default:</dt><dd>Undefined here; include &lt;<a class="el" href="platform_8h.html" title="Entrypoint for platform-specific capabilities.">bsp430/platform.h</a>&gt; to obtain the correct value of this macro. </dd></dl>

</div>
</div>
<a class="anchor" id="ae47d677ac9443e2e26608ef5278f1a6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_AS_TEXT_LENGTH&#160;&#160;&#160;sizeof(&quot;HHH:MM:SS.mmm&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Expected length for a buffer used by <a class="el" href="uptime_8h.html#a1cb1310c769f028347010502456fb918">xBSP430uptimeAsText()</a>.</p>
<p>This macro may be used to allocate such a buffer.</p>
<p>At 32 kHz resolution a 32-bit integer holding ticks can only represent 36 hours before wrapping, but at 10 kHz resolution the same counter might express up to 119 hours, so this allows durations up to up to 999:59:59.999 to be expressed. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2venus6pps_2main_8c-example.html#a41">sensors/venus6pps/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="abc74e7198f189c84941a73c523863191"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_DELAY_CCIDX&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The capture/compare index to be used for delays.</p>
<p>If <a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a> is enabled this capture/compare register index will be used on the uptime timer to support delays using the <a class="el" href="group__grp__timer__alarm.html">Alarm-related Timer Functionality</a> infrastructure.</p>
<dl class="section note"><dt>Note</dt><dd>Most applications should avoid using CC 0 because it is normally reserved for RTOS context switch support, and CC 2 because it is normally used in <a class="el" href="timer_8h.html#a5e250ebcd2e7538ba568455318eede59">uiBSP430timerSafeCounterRead_ni()</a> from <a class="el" href="timer_8h.html#a24b984912d7624627b33023f76c14d31">ulBSP430timerCounter_ni()</a> when <a class="el" href="timer_8h.html#abbc4328b5e870935dd880856eba42648">configBSP430_TIMER_VALID_COUNTER_READ</a> is enabled. The uptime timer is generally asynchronous to MCLK so valid counter reads are critical.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If you assign the same value to <a class="el" href="uptime_8h.html#abc74e7198f189c84941a73c523863191">BSP430_UPTIME_DELAY_CCIDX</a> and <a class="el" href="timer_8h.html#ad8183989e9233a73453351037bc04c29">BSP430_TIMER_VALID_COUNTER_READ_CCIDX</a>, platform initialization will hang attempting to configure the delay alarm.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="a5d852ee2f8f7ec9a52e542cbf8d57c27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_DELAY_MS_NI</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">delay_ms_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lpm_bits_, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exit_expr_&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">    unsigned <span class="keywordtype">long</span> wake_utt;                                             \</div>
<div class="line">    wake_utt = <a class="code" href="uptime_8h.html#ab4b2fa8646bfd0856d6a9b095db30e93">ulBSP430uptime_ni</a>() + <a class="code" href="uptime_8h.html#a463e61b338971a18298935cfca570eb4">BSP430_UPTIME_MS_TO_UTT</a>(delay_ms_); \</div>
<div class="line">    while ((! (exit_expr_)) &amp;&amp; (0 &lt; <a class="code" href="uptime_8h.html#a2b46df1d5bcff71178146409ae0baffa">lBSP430uptimeSleepUntil_ni</a>(wake_utt, lpm_bits_))) { \</div>
<div class="line">      <span class="comment">/* nop */</span>                                                         \</div>
<div class="line">    }                                                                   \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Macro to simplify basic delay operations.</p>
<p>This invokes <a class="el" href="uptime_8h.html#a2b46df1d5bcff71178146409ae0baffa">lBSP430uptimeSleepUntil_ni()</a> in a loop for a specified duration or until another event has occurred.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delay_ms_</td><td>Duration, in milliseconds, that application should sleep</td></tr>
    <tr><td class="paramname">lpm_bits_</td><td>The LPM mode in which the application should sleep. See corresponding parameter in <a class="el" href="uptime_8h.html#a2b46df1d5bcff71178146409ae0baffa">lBSP430uptimeSleepUntil_ni()</a>.</td></tr>
    <tr><td class="paramname">exit_expr_</td><td>An expression that will be tested prior to sleeping; if it evaluates to true, the delay will be aborted immediately regardless of remaining time. Pass <code>0</code> if you wish to delay regardless of other activity.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a16">sensors/ds18b20/main.c</a>, and <a class="el" href="sensors_2venus6pps_2main_8c-example.html#a45">sensors/venus6pps/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ae58cb708c91abec9973d8a4ae912cea8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_DIVIDING_SHIFT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Shift value dividing <a class="el" href="uptime_8h.html#a7accd9ef2adfde0ee3c88d5888e1d616">BSP430_UPTIME_TASSEL</a> for the uptime clock.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="a463e61b338971a18298935cfca570eb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_MS_TO_UTT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ms_</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="core_8h.html#a9316a29a4688017236770d501848fa18">BSP430_CORE_MS_TO_TICKS</a>((ms_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert from milliseconds to ticks of the uptime timer. </p>
<dl class="section note"><dt>Note</dt><dd>Evaluation is valid only when the uptime timer is running. The result is rounded down. </dd></dl>

</div>
</div>
<a class="anchor" id="a7accd9ef2adfde0ee3c88d5888e1d616"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_TASSEL&#160;&#160;&#160;TASSEL_1 /* == TASSEL__ACLK */</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Source selector for uptime clock. This should be bits suitable for storage into the TASSEL field of a timer control register. (Note that TASSEL and TBSSEL support the same values; this works when using TBx as well.)</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="acbfb3c88912e050b4bb58950f824522c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_TIMER_PERIPH_CPPID&#160;&#160;&#160;include &quot;bsp430_config.h&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define to the preprocessor-compatible identifier for a timer that should be used to maintain a continuous system clock sourced from ACLK. The define must appear in the <a class="el" href="bsp430_config.html">BSP430 Configuration</a> subsystem so that functional resource requests are correctly propagated to the underlying resource instances.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions.</dd></dl>
<dl class="section user"><dt>Platform-Dependent Default:</dt><dd>Undefined here; include &lt;<a class="el" href="platform_8h.html" title="Entrypoint for platform-specific capabilities.">bsp430/platform.h</a>&gt; to obtain the correct value of this macro.</dd></dl>
<dl class="section user"><dt>Affects:</dt><dd><a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6d4b3ca225b4057be8a5c6f05de6eb7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_TIMER_PERIPH_HANDLE&#160;&#160;&#160;platform or application specific</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined to the peripheral identifier for a timer that can be used to maintain a continuous system clock sourced from ACLK. This derives directly from <a class="el" href="uptime_8h.html#acbfb3c88912e050b4bb58950f824522c">BSP430_UPTIME_TIMER_PERIPH_CPPID</a>, but is a timer peripheral handle suitable for use in code.</p>
<p>The corresponding HAL and primary ISR features are automatically enabled for this peripheral. CC0 ISR inclusion is influenced by <a class="el" href="group__grp__config__functional.html#gaa14b0b52fb6f36c07294924bea45b36a">configBSP430_UPTIME_TIMER_HAL_CC0_ISR</a>.</p>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#acbfb3c88912e050b4bb58950f824522c">BSP430_UPTIME_TIMER_PERIPH_CPPID</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2hh10d_2main_8c-example.html#a25">sensors/hh10d/main.c</a>, and <a class="el" href="sensors_2venus6pps_2main_8c-example.html#a25">sensors/venus6pps/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a7f9ae9139f8a4415f489870b8b07f3eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_US_TO_UTT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">us_</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="core_8h.html#a219559446b71e4adfab17e300c0c1ecb">BSP430_CORE_US_TO_TICKS</a>((us_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert from microseconds to ticks of the uptime timer. </p>
<dl class="section note"><dt>Note</dt><dd>Evaluation is valid only when the uptime timer is running. The result is rounded down. </dd></dl>

</div>
</div>
<a class="anchor" id="a3cde1e0939c712781836c79428c5996d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_UTT_TO_MS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">utt_</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="core_8h.html#a5c82432f5b308110619c93d2ee32e892">BSP430_CORE_TICKS_TO_MS</a>((utt_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert from ticks of the uptime timer to milliseconds. </p>
<dl class="section note"><dt>Note</dt><dd>Evaluation is valid only when the uptime timer is running. The result is rounded down. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a20">sensors/ds18b20/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a9287c5663ef4d656b76bbb3ece7b7658"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_UPTIME_UTT_TO_US</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">utt_</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="core_8h.html#a3f5213f6fd15b49cb3a6e0b511ba6787">BSP430_CORE_TICKS_TO_US</a>((utt_), ulBSP430uptimeConversionFrequency_Hz_ni_)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert from ticks of the uptime timer to microseconds. </p>
<dl class="section note"><dt>Note</dt><dd>Evaluation is valid only when the uptime timer is running. The result is rounded down. </dd></dl>

</div>
</div>
<a class="anchor" id="a9d11620036fe41e9f4fca30676e4d821"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define configBSP430_UPTIME&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define to a true value to enable the uptime infrastructure to maintain a continuous system clock. A timer that will support this must be identified; see <a class="el" href="uptime_8h.html#acbfb3c88912e050b4bb58950f824522c">BSP430_UPTIME_TIMER_PERIPH_CPPID</a>.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that permits its use only within C preprocessor conditional directives.</dd></dl>
<dl class="section user"><dt>Affects:</dt><dd><a class="el" href="uptime_8h.html#aa3a8d2483ccc30c355cae2f3be6ad547">BSP430_UPTIME</a> </dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="adb0fd811e867799ad7873f867c67dbd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define configBSP430_UPTIME_DELAY&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define to a true value to support uptime-driven delays.</p>
<p>This flag enables infrastructure support to use the <a class="el" href="group__grp__timer__alarm.html">Alarm-related Timer Functionality</a> infrastructure on the uptime timer to support application delays. The core API for this capability is <a class="el" href="uptime_8h.html#a2b46df1d5bcff71178146409ae0baffa">lBSP430uptimeSleepUntil_ni()</a> and <a class="el" href="uptime_8h.html#a5d852ee2f8f7ec9a52e542cbf8d57c27">BSP430_UPTIME_DELAY_MS_NI()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Applications that use the delay functionality should normally enable <a class="el" href="core_8h.html#afdd85450dfaf0dd630d60220d7f3ec1a">configBSP430_CORE_LPM_EXIT_CLEAR_GIE</a>. See discussion at <a class="el" href="uptime_8h.html#a2b46df1d5bcff71178146409ae0baffa">lBSP430uptimeSleepUntil_ni()</a>.</dd></dl>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that permits its use only within C preprocessor conditional directives.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9dea5efac11cf472a643af6c03929fdf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> <a class="el" href="timer_8h.html#a05821bb5b9c3c49fbc7ced58b7a4eaa8">hBSP430halTIMER</a> hBSP430uptimeTimer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get access to the timer controlling the uptime infrastructure.</p>
<p>You might need this if you want to hook into its callbacks.</p>
<p>Don't hook into the overflow callback, please. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2hh10d_2main_8c-example.html#a37">sensors/hh10d/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a6c6478a3b6c67d2b0d1cee284f7d69c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430uptimeDelaySetEnabled_ni </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enablep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable or disable the alarm used by ulBSP430uptimeDelayUntil_ni().</p>
<p>This delegates to <a class="el" href="group__grp__timer__alarm.html#gaf78fc60de828bc03bb7c93624f384ef1">iBSP430timerAlarmSetEnabled_ni()</a>.</p>
<p>The alarm is enabled by vBSp430uptimeStart_ni() if <a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a> is enabled.</p>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a2b46df1d5bcff71178146409ae0baffa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long lBSP430uptimeSleepUntil_ni </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>setting_utt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>lpm_bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sleep until the uptime timer reaches a particular value.</p>
<p>This uses <a class="el" href="uptime_8h.html#abc74e7198f189c84941a73c523863191">BSP430_UPTIME_DELAY_CCIDX</a> and the <a class="el" href="group__grp__timer__alarm.html">Alarm-related Timer Functionality</a> to sleep until either a specific time has been reached or an interrupt wakes the processor.</p>
<dl class="section note"><dt>Note</dt><dd>Interrupts are enabled during this sleep, and an interrupt unrelated to the wakeup alarm will cause an early return. If such an interrupt does not clear <a class="el" href="msp430_8h.html#a1e3cee306f51b98da4e4c97ab118f506">GIE</a> on exit there will be a short window between wakeup and when this function clears <a class="el" href="msp430_8h.html#a1e3cee306f51b98da4e4c97ab118f506">GIE</a> again in which additional interrupts may execute. See <a class="el" href="enhanced.html#enh_interrupts">Interrupts and Critical Sections</a>.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function may enable interrupts and sleep until its completion conditions are met.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">setting_utt</td><td>The uptime counter value at which the application wishes to be awakened if no events have occured before then. Note that the call is a wrapper around <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> and may return immediately with an error result if the specified time appears to be in the past.</td></tr>
    <tr><td class="paramname">lpm_bits</td><td>The bits to be set in the status register to control the low power mode used while awaiting the wakeup time. A value such as <a class="el" href="msp430_8h.html#a44fde789b84d1b15c41e577d6a080eff">LPM0_bits</a> or <a class="el" href="msp430_8h.html#a8af1e5b3633693d9439d284100183004">LPM2_bits</a> should be used depending on application needs. <a class="el" href="msp430_8h.html#a1e3cee306f51b98da4e4c97ab118f506">GIE</a> will be added to these bits.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Consider whether the LPM mode might disable the clock or timer on which the wakeup depends. In many recent MCUs the LPM mode will be internally masked to ensure this does not happen. However, on 4xx MCUs setting <a class="el" href="msp430_8h.html#a97eaedd508e6f77e34a49433f8e9e2eb">LPM4_bits</a> when ACLK drives the uptime timer will cause the system to hang. Use <a class="el" href="msp430_8h.html#ae8217664a1729103e247c6984d1744cc">LPM3_bits</a> as a default when only the delay is important.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of timer ticks remaining until the originally-requested time. If an error occurs, a zero value will be returned. There is no facility to tell whether wakeup occurred due to the alarm or another interrupt, except that if the return value is positive it is likely another interrupt is the cause.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function is not implemented unless <a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a> is enabled.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function does not diagnose specific errors such as invoking it while the uptime timer or the delay alarm are disabled.</dd></dl>
<dl class="section user"><dt>Dependency:</dt><dd><a class="el" href="uptime_8h.html#adb0fd811e867799ad7873f867c67dbd3">configBSP430_UPTIME_DELAY</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7e0b8aeba63d7b2ce965a650125eb8ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> unsigned long ulBSP430uptime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the system uptime in clock ticks. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a35">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ab4b2fa8646bfd0856d6a9b095db30e93"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> unsigned long ulBSP430uptime_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return system uptime in clock ticks with disabled interrupts.</p>
<dl class="section note"><dt>Note</dt><dd>The returned value is adjusted for a single pending overflow event that occurs while interrupts are disabled, but will be wrong if interrupts remain disabled long enough for a second overflow to occur. See <a class="el" href="timer_8h.html#a24b984912d7624627b33023f76c14d31">ulBSP430timerCounter_ni()</a> for details.</dd></dl>
<p><a class="el" href="timer_8h.html#a381b6669a4c008a40d74947890f1e463">vBSP430timerSafeCounterInitialize_ni()</a> will have been called on <a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a> so <a class="el" href="timer_8h.html#ad8183989e9233a73453351037bc04c29">BSP430_TIMER_VALID_COUNTER_READ_CCIDX</a> is reserved to support accurate counter reads. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a54">bootstrap/applpm/main.c</a>, <a class="el" href="rfem_2cc3000_2main_8c-example.html#a2">rfem/cc3000/main.c</a>, <a class="el" href="sensors_2ds18b20_2main_8c-example.html#a6">sensors/ds18b20/main.c</a>, <a class="el" href="sensors_2hh10d_2main_8c-example.html#a43">sensors/hh10d/main.c</a>, <a class="el" href="sensors_2venus6pps_2main_8c-example.html#a47">sensors/venus6pps/main.c</a>, and <a class="el" href="utility_2cli_2main_8c-example.html#a15">utility/cli/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="abee524dac4c6d777b5493f1c16bc1c2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ulBSP430uptimeConversionFrequency_Hz_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the uptime clock conversion frequency.</p>
<p>This is the number of uptime ticks in a standard second, and is used when translating between tick measurements and second-based durations. The default value is the nominal frequency of the timer underlying the uptime clock, but this may be overridden by <a class="el" href="uptime_8h.html#aa3bacc5bf6eeb96037f3470fa3ac9c5c">ulBSP430uptimeSetConversionFrequency_ni()</a> when a more accurate estimate of actual frequency is available.</p>
<p>This value is set when <a class="el" href="uptime_8h.html#af2ac7fe1f205bed2b6e8e41faa8a43bc">vBSP430uptimeStart_ni()</a> or <a class="el" href="uptime_8h.html#af8e943e205552a5c9aa1532ca1347b0b">vBSP430uptimeResume_ni()</a> are invoked. Its value is undefined when the uptime timer is stopped. Reconfiguration of the timer source or the underlying clock while the timer is running may invalidate its value.</p>
<dl class="section return"><dt>Returns</dt><dd>The conversion frequency of the uptime clock, in Hz. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2ds18b20_2main_8c-example.html#a7">sensors/ds18b20/main.c</a>, <a class="el" href="sensors_2hh10d_2main_8c-example.html#a19">sensors/hh10d/main.c</a>, and <a class="el" href="sensors_2venus6pps_2main_8c-example.html#a17">sensors/venus6pps/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aa3bacc5bf6eeb96037f3470fa3ac9c5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ulBSP430uptimeSetConversionFrequency_ni </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>frequency_Hz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the uptime frequency that will be used for tick/time conversion.</p>
<p>In cases where the uptime clock derives from <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaad127090299761a8dbd1b8248b7ab2c0e">VLOCLK</a>, the nominal frequency used by default may be off by as much as 10% from the actual frequency. This function can be used when a more accurate estimate of actual frequency is available to decrease the error in converted times.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frequency_Hz</td><td>the frequency to be used when converting durations in ticks to durations in seconds or related units. If a value of zero is provided, the current nominal frequency will be used in subsequent conversions.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the previous value of the conversion frequency, which may be 0 if no conversions had occured. </dd></dl>

</div>
</div>
<a class="anchor" id="af8e943e205552a5c9aa1532ca1347b0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430uptimeResume_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resume the system uptime clock</p>
<p>The clocks are re-enabled to continue counting from their last recorded value. Also, the conversion frequency used by <a class="el" href="uptime_8h.html#abee524dac4c6d777b5493f1c16bc1c2a">ulBSP430uptimeConversionFrequency_Hz_ni()</a> is updated based on the current timer configuration. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a65">bootstrap/applpm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="af2ac7fe1f205bed2b6e8e41faa8a43bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430uptimeStart_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure the system uptime clock.</p>
<p>The timer associated with the uptime clock is reset to zero and begins counting up.</p>
<dl class="section warning"><dt>Warning</dt><dd>This should be invoked once, normally by <a class="el" href="platform_8h.html#a616515ce5e0f7635ca36a815841d2a21">vBSP430platformInitialize_ni()</a>. Invoking it a second time may result in undefined behavior. Use <a class="el" href="uptime_8h.html#a62fc249f2c4699ab77b408e3488ca4b5">vBSP430uptimeSuspend_ni()</a> and <a class="el" href="uptime_8h.html#af8e943e205552a5c9aa1532ca1347b0b">vBSP430uptimeResume_ni()</a> to turn the uptime timer off and on. </dd></dl>

</div>
</div>
<a class="anchor" id="a62fc249f2c4699ab77b408e3488ca4b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vBSP430uptimeSuspend_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Suspend the system uptime clock.</p>
<p>Suspension means that the clocks are halted and interrupts from them inhibited. Counter values are not modified. <a class="el" href="uptime_8h.html#af8e943e205552a5c9aa1532ca1347b0b">vBSP430uptimeResume_ni</a> should be invoked to release the clocks to continue counting.</p>
<p>The system clock may be suspended prior to entering certain low power modes. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a58">bootstrap/applpm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a1cb1310c769f028347010502456fb918"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* xBSP430uptimeAsText </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>duration_utt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert an uptime count to text HHH:MM:SS.mmm format.</p>
<p>At least the MM:SS.mmm portion is present, with minutes space-padded on the left. If the duration exceeds 59:59.999, then space-padded hours will be included as well, and minutes will be zero-padded.</p>
<p>The conversion factor from <a class="el" href="uptime_8h.html#abee524dac4c6d777b5493f1c16bc1c2a">ulBSP430uptimeConversionFrequency_Hz_ni()</a> is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration_utt</td><td>a duration in uptime ticks</td></tr>
    <tr><td class="paramname">buffer</td><td>a pointer to a buffer large enough to hold the represented data, normally <a class="el" href="uptime_8h.html#ae47d677ac9443e2e26608ef5278f1a6d">BSP430_UPTIME_AS_TEXT_LENGTH</a> characters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>buffer</code> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="sensors_2venus6pps_2main_8c-example.html#a49">sensors/venus6pps/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a790fc3c41c4a8e93ec7caca7825733c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* xBSP430uptimeAsText_ni </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>duration_utt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert an uptime count to text HH:MM:SS.mmm format in a static buffer.</p>
<p>Invokes <a class="el" href="uptime_8h.html#a1cb1310c769f028347010502456fb918">xBSP430uptimeAsText()</a> with a static 14-character buffer adequate for representing durations up to 999:59:59.999 in contexts where allocating storage is problematic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration_utt</td><td>see <a class="el" href="uptime_8h.html#a1cb1310c769f028347010502456fb918">xBSP430uptimeAsText()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the static storage holding the formatted time.</dd></dl>
<dl class="section user"><dt>Deprecated:</dt><dd>Legacy interface, use <a class="el" href="uptime_8h.html#a1cb1310c769f028347010502456fb918">xBSP430uptimeAsText()</a>. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rfem_2cc3000_2main_8c-example.html#a1">rfem/cc3000/main.c</a>, <a class="el" href="sensors_2ds18b20_2main_8c-example.html#a21">sensors/ds18b20/main.c</a>, <a class="el" href="sensors_2hh10d_2main_8c-example.html#a42">sensors/hh10d/main.c</a>, <a class="el" href="utility_2alarm_2main_8c-example.html#a34">utility/alarm/main.c</a>, and <a class="el" href="utility_2cli_2main_8c-example.html#a14">utility/cli/main.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 25 2013 11:56:36 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
