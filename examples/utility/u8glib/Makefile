# For SHARP96 boosterpack: SHARP96=1
# For LS013B7DH03: SHARP96=1 COLS=128 ROWS=128
# For LS027B7DH01: SHARP96=1 COLS=400 ROWS=240 WITH_WIDE_U8G=1
TEST_PLATFORMS=trxeb exp430f5438 exp430f5529
SHARP96 ?= 0
U8GLIB_ROOT ?= /opt/u8glib
U8GLIB_CSRC = $(U8GLIB_ROOT)/csrc
AUX_CPPFLAGS = -I$(U8GLIB_CSRC)
ifneq (,$(COLS))
AUX_CPPFLAGS += -DBSP430_PLATFORM_SHARPLCD_COLUMNS=$(COLS)
endif # COLS
ifneq (,$(ROWS))
AUX_CPPFLAGS += -DBSP430_PLATFORM_SHARPLCD_ROWS=$(ROWS)
endif # ROWS
WITH_WIDE_U8G ?= 0
ifneq (0,$(WITH_WIDE_U8G))
# Required when $(COLS) > 255
AUX_CPPFLAGS += -DU8G_16BIT
endif # WITH_WIDE_U8G
PLATFORM ?= trxeb
MODULES=$(MODULES_PLATFORM)
MODULES += $(MODULES_UPTIME)
MODULES += $(MODULES_CONSOLE)
MODULES += $(MODULES_SERIAL)
MODULES += periph/port
ifneq (0,$(SHARP96))
AUX_CPPFLAGS += -DconfigBSP430_PLATFORM_BOOSTERPACK_SHARP96=1
VPATH += $(BSP430_ROOT)/src/boosterpack/sharp96
MODULES += utility/sharplcd
PLATFORM_U8G_PB_C ?= $(U8GLIB_CSRC)/u8g_pb8h1.c
endif # SHARP96

U8GLIB_SRC = \
    $(U8GLIB_CSRC)/u8g_com_api.c \
    $(U8GLIB_CSRC)/u8g_ll_api.c \
    $(U8GLIB_CSRC)/u8g_font.c \
    $(U8GLIB_CSRC)/u8g_line.c \
    $(U8GLIB_CSRC)/u8g_clip.c \
    $(U8GLIB_CSRC)/u8g_page.c \
    $(U8GLIB_CSRC)/u8g_state.c \
    $(U8GLIB_CSRC)/u8g_pb.c \
    $(PLATFORM_U8G_PB_C) \
    $(U8GLIB_ROOT)/fntsrc/u8g_font_10x20.c
SRC = $(U8GLIB_SRC) u8g_bsp430.c main.c
include $(BSP430_ROOT)/make/Makefile.common
