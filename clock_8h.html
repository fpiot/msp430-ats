<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BSP430: include/bsp430/clock.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20120811</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_afb03915f4cb7ca917695af54c12c4db.html">include</a></li><li class="navelem"><a class="el" href="dir_a3c8f7f0425d4f7a44c2fd239713bb47.html">bsp430</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">clock.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Clock-related functions implemented on all MSP430 MCUs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="common_8h_source.html">bsp430/common.h</a>&gt;</code><br/>
</div>
<p><a href="clock_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6ffd3f4fab35b64d0e8ff8d3179d69d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a6ffd3f4fab35b64d0e8ff8d3179d69d9">BSP430_CLOCK_NOMINAL_MCLK_HZ</a>&#160;&#160;&#160;7948800UL</td></tr>
<tr class="memitem:a34ed9ba188906905e9f0fed4a55896e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a34ed9ba188906905e9f0fed4a55896e0">BSP430_CLOCK_US_TO_NOMINAL_MCLK</a>(_delay_us)&#160;&#160;&#160;(((_delay_us) * <a class="el" href="clock_8h.html#a6ffd3f4fab35b64d0e8ff8d3179d69d9">BSP430_CLOCK_NOMINAL_MCLK_HZ</a>) / 1000000UL)</td></tr>
<tr class="memitem:adfae913d448a6d5e70f9ed8f727f4afa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#adfae913d448a6d5e70f9ed8f727f4afa">BSP430_CLOCK_NOMINAL_SMCLK_DIVIDING_SHIFT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:af540b5147f5f33d64f3a81aed12d3a6d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#af540b5147f5f33d64f3a81aed12d3a6d">BSP430_CLOCK_LFXT1_STABILIZATION_DELAY_CYCLES</a>&#160;&#160;&#160;(20000UL)</td></tr>
<tr class="memitem:a7a0cdc169aac90a5c877b3ca09a4608d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI</a>()&#160;&#160;&#160;(IFG1 &amp; OFIFG)</td></tr>
<tr class="memitem:ae59021b5f9f12d0361bdcc8144859890"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#ae59021b5f9f12d0361bdcc8144859890">BSP430_CLOCK_LFXT1_CLEAR_FAULT_NI</a>()&#160;&#160;&#160;do { IFG1 &amp;= ~OFIFG; } while (0)</td></tr>
<tr class="memitem:a7edeacce320b73a2f7de5d2a865a2802"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a7edeacce320b73a2f7de5d2a865a2802">BSP430_CLOCK_NOMINAL_XT1CLK_HZ</a>&#160;&#160;&#160;32768U</td></tr>
<tr class="memitem:a3b4bcc7d7622f7375d88029e96de2230"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a3b4bcc7d7622f7375d88029e96de2230">BSP430_CLOCK_NOMINAL_XT2CLK_HZ</a>&#160;&#160;&#160;must be externally provided</td></tr>
<tr class="memitem:ae2ace757e68c3bc4206f0ff4a3a39d13"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a>&#160;&#160;&#160;platform specific around 10-12 kHz</td></tr>
<tr class="memitem:a24c49529cfa0ba1ada6819dfe6c5d68e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a24c49529cfa0ba1ada6819dfe6c5d68e">BSP430_CLOCK_PUC_MCLK_HZ</a>&#160;&#160;&#160;platform specific around 1 MHz</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a577bb951d567b756f39b52c3c1933f41"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a577bb951d567b756f39b52c3c1933f41">eBSP430clockSource</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:afad775d35ca969034172f0955cf1bcda"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a> { <br/>
&#160;&#160;<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa7a341e5280fd901adcb44e5868a1adee">eBSP430clockSRC_NONE</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa71286517a83aeb014d841071bc7794d8">eBSP430clockSRC_XT1CLK</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaad127090299761a8dbd1b8248b7ab2c0e">eBSP430clockSRC_VLOCLK</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa25f599d5547daa7bb5b126162fe3c06e">eBSP430clockSRC_REFOCLK</a>, 
<br/>
&#160;&#160;<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa08fe6b5e068e82d29fe98632bc2f4b32">eBSP430clockSRC_DCOCLK</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa003c26ac0b1326d3423e705dd4ab5dab">eBSP430clockSRC_DCOCLKDIV</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaacd6b3df0e86d9a98bcd7e044d4aac248">eBSP430clockSRC_XT2CLK</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa0b31074786d75cdbc65a1be576a20786">eBSP430clockSRC_XT1CLK_OR_VLOCLK</a>, 
<br/>
&#160;&#160;<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa3480b90ace81a2b9f2c25d22d18fc4d6">eBSP430clockSRC_XT1CLK_OR_REFOCLK</a>, 
<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa509e9b965e91f15094b75169f550b95d">eBSP430clockSRC_XT1CLK_FALLBACK</a>
<br/>
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a538f01f39cf54267229fe04877d3185e"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a538f01f39cf54267229fe04877d3185e">ulBSP430clockConfigureMCLK_ni</a> (unsigned long mclk_Hz)</td></tr>
<tr class="memitem:a5d5257ff00b9fafcd86e4f5eaa73ee79"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a5d5257ff00b9fafcd86e4f5eaa73ee79">ulBSP430clockMCLK_Hz_ni</a> (void)</td></tr>
<tr class="memitem:a453c22edb5443469b217d43e4f5555cd"><td class="memItemLeft" align="right" valign="top">static unsigned long __inline__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a453c22edb5443469b217d43e4f5555cd">ulBSP430clockMCLK_Hz</a> (void)</td></tr>
<tr class="memitem:a5e043a1d5544be98754de17482eb009f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a5e043a1d5544be98754de17482eb009f">iBSP430clockConfigureSMCLKDividingShift_ni</a> (int shift_pos)</td></tr>
<tr class="memitem:af4f11047b7504eab981af923a4a58036"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#af4f11047b7504eab981af923a4a58036">iBSP430clockSMCLKDividingShift_ni</a> (void)</td></tr>
<tr class="memitem:a0a6941051abd2d3a18654b83ba1f9398"><td class="memItemLeft" align="right" valign="top">static unsigned long __inline__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a0a6941051abd2d3a18654b83ba1f9398">ulBSP430clockSMCLK_Hz_ni</a> (void)</td></tr>
<tr class="memitem:ac6df48b7667e1268240ea5555fad1d9c"><td class="memItemLeft" align="right" valign="top">static unsigned long __inline__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#ac6df48b7667e1268240ea5555fad1d9c">ulBSP430clockSMCLK_Hz</a> (void)</td></tr>
<tr class="memitem:a11303f50d951e4d623afe1f656bda7a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#a11303f50d951e4d623afe1f656bda7a8">iBSP430clockConfigureLFXT1_ni</a> (int enablep, int loop_limit)</td></tr>
<tr class="memitem:af634a7a6fbaf23e799250ed9a02b7ce4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#af634a7a6fbaf23e799250ed9a02b7ce4">iBSP430clockConfigureACLK_ni</a> (<a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a> sel)</td></tr>
<tr class="memitem:ad3c75b0b9bb266e2110c060e26d29651"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#ad3c75b0b9bb266e2110c060e26d29651">usBSP430clockACLK_Hz_ni</a> (void)</td></tr>
<tr class="memitem:ad88e60e07be8bd774f7187da781023db"><td class="memItemLeft" align="right" valign="top">static unsigned short __inline__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clock_8h.html#ad88e60e07be8bd774f7187da781023db">usBSP430clockACLK_Hz</a> (void)</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Clock-related functions implemented on all MSP430 MCUs. </p>
<p>This module declares functions and macros of general use in managing MSP430 clocks. The interface here is independent of the underlying clock peripheral, but in some cases behavior is refined or clarified in the peripheral-specific header.</p>
<p>This module will include the peripheral-specific header if a functional presence preprocessor symbol is available that is recognized as a supported clock peripheral. Recognized peripherals and the corresponding BSP430 header are: </p>
<ul>
<li>
&lt;<a class="el" href="bc2_8h.html" title="Hardware presentation/abstraction for Basic Clock Module+ (BC2).">bsp430/periph/bc2.h</a>&gt; for BC2 (Basic Clock Module+) </li>
<li>
&lt;<a class="el" href="fllplus_8h.html" title="Hardware presentation/abstraction for FLL Plus (FLLPLUS).">bsp430/periph/fllplus.h</a>&gt; for FLLPLUS and FLLPLUS_SMALL (FLL Plus) </li>
<li>
&lt;<a class="el" href="ucs_8h.html" title="Hardware presentation/abstraction for Unified Clock System (UCS).">bsp430/periph/ucs.h</a>&gt; for UCS and UCS_RF (Unified Clock System) </li>
<li>
&lt;<a class="el" href="cs_8h.html" title="Hardware presentation/abstraction for Clock System (CS).">bsp430/periph/cs.h</a>&gt; for CS (Clock System) </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Some modules (such as BC2) use LFXT1 to denote the source for ACLK regardless of whether that is the external crystal or VLOCLK. Throughout BSP430 the term LFXT1 is exclusively used to denote an external low-frequency crystal.</dd></dl>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="ae59021b5f9f12d0361bdcc8144859890"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_LFXT1_CLEAR_FAULT_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;do { IFG1 &amp;= ~OFIFG; } while (0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the fault associated with LFXT1.</p>
<p>This clears the state bits associated with a fault in the LFXT1 crystal. If the crystal still exhibits a fault condition, the bits will be set again automatically.</p>
<dl class="section note"><dt>Note</dt><dd>Where faults can be cleared on peripheral-specific registers, the system oscillator fault is also cleared. This is in contrast to what is tested by <a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI()</a>.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI()</a></dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions.</dd></dl>
<dl class="section user"><dt>Overridable:</dt><dd>The value here may be removed by a subsequent <code>#undef</code> and redefined. </dd></dl>

</div>
</div>
<a class="anchor" id="a7a0cdc169aac90a5c877b3ca09a4608d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_LFXT1_IS_FAULTED_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(IFG1 &amp; OFIFG)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether the LFXT1 crystal has a fault condition.</p>
<p>The generic implementation looks for any oscillator fault by checking the system-wide register. It is overridden in peripheral-specific clock headers where an ability exists to check specifically for a LFXT1 fault. The value is nonzero iff an external crystal is the source for LFXT1 and a fault has been detected.</p>
<dl class="section note"><dt>Note</dt><dd>This function macro is implicitly not to be interrupted, and should be implemented where possible as a single instruction test.</dd>
<dd>
This test is intended specifically to validate an external watch crystal running at 32 kiHz. Where LFXT1 is sourced from other means, it is assumed that the (missing) crystal is faulted even if the peripheral-specific bit suggests it is not. Similarly, the state of the system oscillator fault bit is not reflected in the value for a peripheral-specific check.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If the underlying peripheral requires that its register bank be unlocked for modification, this macro will do so then re-lock them. This will result in unexpected behavior if the macro is invoked in a context where the registers are already unlocked.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="clock_8h.html#ae59021b5f9f12d0361bdcc8144859890">BSP430_CLOCK_LFXT1_CLEAR_FAULT_NI()</a></dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions.</dd></dl>
<dl class="section user"><dt>Overridable:</dt><dd>The value here may be removed by a subsequent <code>#undef</code> and redefined. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a54">bootstrap/applpm/main.c</a>, and <a class="el" href="bootstrap_2clocks_2main_8c-example.html#a16">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="af540b5147f5f33d64f3a81aed12d3a6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_LFXT1_STABILIZATION_DELAY_CYCLES&#160;&#160;&#160;(20000UL)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define this to the number of MCLK cycles that <a class="el" href="clock_8h.html#a11303f50d951e4d623afe1f656bda7a8">iBSP430clockConfigureLFXT1_ni</a> should delay, after clearing oscillator faults, before checking for oscillator stability. This must be a compile-time constant integer compatible with <code>unsigned long</code>.</p>
<p>Crystal stabilization can take hundreds of milliseconds. If this value is too short, <a class="el" href="clock_8h.html#a11303f50d951e4d623afe1f656bda7a8">iBSP430clockConfigureLFXT1_ni</a> may prematurely decide that the crystal is working; if it is too long, the return from <a class="el" href="clock_8h.html#a11303f50d951e4d623afe1f656bda7a8">iBSP430clockConfigureLFXT1_ni</a> is delayed.</p>
<p>The default value is chosen to reflect a 20msec delay at the PUC MCLK frequency of roughly 1MHz. This allows <a class="el" href="common_8h.html#ae7df9374f27e94580ce596ad98949dcd">BSP430_CORE_WATCHDOG_CLEAR()</a> to be invoked within the loop to prevent a watchdog reset while waiting for stabilization. It does assume that an unstable crystal will indicate a fault within 10msec, which may not be true.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a6">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a6ffd3f4fab35b64d0e8ff8d3179d69d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_NOMINAL_MCLK_HZ&#160;&#160;&#160;7948800UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A constant representing the desired clock speed of the master clock.</p>
<p>If <a class="el" href="platform_8h.html#a9ccb62d7259bf01a8d3d099359d0042a">BSP430_PLATFORM_BOOT_CONFIGURE_CLOCKS</a> is true, <a class="el" href="platform_8h.html#a616515ce5e0f7635ca36a815841d2a21">vBSP430platformInitialize_ni()</a> will use this value to initialize the system clocks. The value should not be used after this point, as <a class="el" href="clock_8h.html#a5d5257ff00b9fafcd86e4f5eaa73ee79">ulBSP430clockMCLK_Hz_ni()</a> is more likely to reflect the actual MCLK rate.</p>
<dl class="section note"><dt>Note</dt><dd>The default value is calculated from 3*3*5*5*512*69=115200*69, and is the value nearest 8MHz which is also compatible with as many serial baud rates as possible.</dd>
<dd>
Applications may wish to provide an alternative value suited to specific needs. It is suggested that the value include the suffix L in case the compiler does not automatically promote constants as necessary.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2blink_2main_8c-example.html#a4">bootstrap/blink/main.c</a>, <a class="el" href="bootstrap_2clocks_2main_8c-example.html#a10">bootstrap/clocks/main.c</a>, <a class="el" href="bootstrap_2console_2main_8c-example.html#a6">bootstrap/console/main.c</a>, <a class="el" href="sensors_2ds18b20_2main_8c-example.html#a13">sensors/ds18b20/main.c</a>, and <a class="el" href="sensors_2tmp102_2main_8c-example.html#a13">sensors/tmp102/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="adfae913d448a6d5e70f9ed8f727f4afa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_NOMINAL_SMCLK_DIVIDING_SHIFT&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SMCLK is normally configured to divide another clock by shifting it left this many positions. E.g., if MCLK is 20 MHz, a dividing shift of 2 will produce a clock divisor of 4 and an SMCLK at 5 MHz. The range of division and default divisor may be MCU-specific. The value reflects the divisor of MCLK. If the clock source for SMCLK is different than an undivided MCLK, the code that configures the clock may modify the shift value that is stored in the peripheral registers.</p>
<p>If <a class="el" href="platform_8h.html#a9ccb62d7259bf01a8d3d099359d0042a">BSP430_PLATFORM_BOOT_CONFIGURE_CLOCKS</a> is true, <a class="el" href="platform_8h.html#a616515ce5e0f7635ca36a815841d2a21">vBSP430platformInitialize_ni()</a> will invoke to <a class="el" href="clock_8h.html#a5e043a1d5544be98754de17482eb009f">iBSP430clockConfigureSMCLKDividingShift_ni()</a> with this setting to configure the clock divisors after setting the nominal MCLK frequency.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="clock_8h.html#af4f11047b7504eab981af923a4a58036">iBSP430clockSMCLKDividingShift_ni()</a> should always be used in preference to this constant to determine the current relative MCLK/SMCLK frequencies.</dd></dl>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a13">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ae2ace757e68c3bc4206f0ff4a3a39d13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_NOMINAL_VLOCLK_HZ&#160;&#160;&#160;platform specific around 10-12 kHz</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Nominal frequency of VLOCLK, in Hz.</p>
<p>The value is constant for all platforms using a specific clock peripheral, and is defined in the peripheral header. It is usually in the range of 10-12 kHz, but is highly sensitive to temperature and voltage. The actual value may be off by as much as 20%, making the clock relatively useless for anything that requires accuracy (such as serial baud rates).</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a17">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a7edeacce320b73a2f7de5d2a865a2802"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_NOMINAL_XT1CLK_HZ&#160;&#160;&#160;32768U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Nominal rate of the external low-frequency crystal. This is expected to be a 32 kiHz watch crystal, so that's what the default is. </p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a18">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a3b4bcc7d7622f7375d88029e96de2230"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_NOMINAL_XT2CLK_HZ&#160;&#160;&#160;must be externally provided</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Nominal rate of a secondary external clock. This must be defined externally if <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaacd6b3df0e86d9a98bcd7e044d4aac248">eBSP430clockSRC_XT2CLK</a> is to be used.</p>
<dl class="section user"><dt>No Default:</dt><dd>A value must be provided explicitly if the feature is to be used. </dd></dl>

</div>
</div>
<a class="anchor" id="a24c49529cfa0ba1ada6819dfe6c5d68e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_PUC_MCLK_HZ&#160;&#160;&#160;platform specific around 1 MHz</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Nominal frequency of MCLK at power-up, in Hz.</p>
<p>The value is constant for all platforms using a specific clock peripheral, and is defined in the peripheral header. It is usually around 1 MHz. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a9">bootstrap/clocks/main.c</a>, and <a class="el" href="bootstrap_2lpm_2main_8c-example.html#a7">bootstrap/lpm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a34ed9ba188906905e9f0fed4a55896e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_CLOCK_US_TO_NOMINAL_MCLK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_delay_us</td><td>)</td>
          <td>&#160;&#160;&#160;(((_delay_us) * <a class="el" href="clock_8h.html#a6ffd3f4fab35b64d0e8ff8d3179d69d9">BSP430_CLOCK_NOMINAL_MCLK_HZ</a>) / 1000000UL)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A function macro that converts a value specified in microseconds to an approximate duration counted in MCLK cycles. This is primarily used to provide the parameter to <a class="el" href="common_8h.html#a327cb5d1a1607c19c9551a18507bbb63">BSP430_CORE_DELAY_CYCLES</a> when the desired delay is specified by time rather than cycles.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_delay_us</td><td>the delay in microseconds. Expected, but not required, to be a compile-time integer constant compatible with unsigned long. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2>Typedef Documentation</h2>
<a class="anchor" id="a577bb951d567b756f39b52c3c1933f41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a>  <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constants used for MCU-independent specification of clocks.</p>
<p>Use these instead of peripheral-specific values like <a class="el" href="msp430_8h.html#a09677a3ba15a179483b1e4126c6ebcf3">SELA_1</a> or <a class="el" href="msp430_8h.html#abc7cb6910e39c4e10104f51e060af5db">LFXT1S_2</a> to identify clock sources by their function. This also permits finer control within <a class="el" href="clock_8h.html#af634a7a6fbaf23e799250ed9a02b7ce4">iBSP430clockConfigureACLK_ni()</a>, allowing that to select a secondary source given oscillator faults in the primary source. </p>

</div>
</div>
<h2>Enumeration Type Documentation</h2>
<a class="anchor" id="afad775d35ca969034172f0955cf1bcda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constants used for MCU-independent specification of clocks.</p>
<p>Use these instead of peripheral-specific values like <a class="el" href="msp430_8h.html#a09677a3ba15a179483b1e4126c6ebcf3">SELA_1</a> or <a class="el" href="msp430_8h.html#abc7cb6910e39c4e10104f51e060af5db">LFXT1S_2</a> to identify clock sources by their function. This also permits finer control within <a class="el" href="clock_8h.html#af634a7a6fbaf23e799250ed9a02b7ce4">iBSP430clockConfigureACLK_ni()</a>, allowing that to select a secondary source given oscillator faults in the primary source. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa7a341e5280fd901adcb44e5868a1adee"></a>eBSP430clockSRC_NONE</em>&nbsp;</td><td>
<p>A marker value indicating that no clock is selected. Generally this is not an appropriate value to use as a parameter. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa71286517a83aeb014d841071bc7794d8"></a>eBSP430clockSRC_XT1CLK</em>&nbsp;</td><td>
<p>XT1 is the primary external clock. It is generally a low-frequency watch crystal running at 32 kiHz. The nominal speed for this clock is <a class="el" href="clock_8h.html#a7edeacce320b73a2f7de5d2a865a2802">BSP430_CLOCK_NOMINAL_XT1CLK_HZ</a>. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaad127090299761a8dbd1b8248b7ab2c0e"></a>eBSP430clockSRC_VLOCLK</em>&nbsp;</td><td>
<p>VLOCLK is a low-speed internal clock, normally around 10-12 kHz. It is relatively imprecise. The nominal speed for this clock is <a class="el" href="clock_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a>. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa25f599d5547daa7bb5b126162fe3c06e"></a>eBSP430clockSRC_REFOCLK</em>&nbsp;</td><td>
<p>REFOCLK is an internally low power trimmed 32 kiHz oscillator supported in the UCS peripheral </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa08fe6b5e068e82d29fe98632bc2f4b32"></a>eBSP430clockSRC_DCOCLK</em>&nbsp;</td><td>
<p>DCOCLK is whatever the DCO clock frequency is. It's probably related to <a class="el" href="clock_8h.html#a6ffd3f4fab35b64d0e8ff8d3179d69d9">BSP430_CLOCK_NOMINAL_MCLK_HZ</a>, but may be a multiple of that. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa003c26ac0b1326d3423e705dd4ab5dab"></a>eBSP430clockSRC_DCOCLKDIV</em>&nbsp;</td><td>
<p>DCOCLKDIV is a divided DCO clock. It's probably <a class="el" href="clock_8h.html#a6ffd3f4fab35b64d0e8ff8d3179d69d9">BSP430_CLOCK_NOMINAL_MCLK_HZ</a>, but may be a multiple of that. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaacd6b3df0e86d9a98bcd7e044d4aac248"></a>eBSP430clockSRC_XT2CLK</em>&nbsp;</td><td>
<p>A secondary external clock. This is only recognized if <a class="el" href="clock_8h.html#a3b4bcc7d7622f7375d88029e96de2230">BSP430_CLOCK_NOMINAL_XT2CLK_HZ</a> has been provided. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa0b31074786d75cdbc65a1be576a20786"></a>eBSP430clockSRC_XT1CLK_OR_VLOCLK</em>&nbsp;</td><td>
<p>Fallback: use XT1CLK if <a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI()</a> is false, otherwise use VLOCLK.</p>
<p>The main value of this is in BC2-based clocks, where selecting XT1CLK as the source for ACLK will cause ACLK to fall back to VLOCLK if the crystal is faulted, but using the resulting ACLK as a timer source will not work. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa3480b90ace81a2b9f2c25d22d18fc4d6"></a>eBSP430clockSRC_XT1CLK_OR_REFOCLK</em>&nbsp;</td><td>
<p>Fallback: use XT1CLK if <a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI()</a> is false, otherwise use REFOCLK.</p>
<p>Similar to <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa0b31074786d75cdbc65a1be576a20786">eBSP430clockSRC_XT1CLK_OR_VLOCLK</a> for UCS-based systems. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="afad775d35ca969034172f0955cf1bcdaa509e9b965e91f15094b75169f550b95d"></a>eBSP430clockSRC_XT1CLK_FALLBACK</em>&nbsp;</td><td>
<p>Fallback: use XT1CLK if <a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI()</a> is false, otherwise use the most precise available internal reference clock.</p>
<p>Generally this will be equivalent to <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa0b31074786d75cdbc65a1be576a20786">eBSP430clockSRC_XT1CLK_OR_VLOCLK</a> or <a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcdaa3480b90ace81a2b9f2c25d22d18fc4d6">eBSP430clockSRC_XT1CLK_OR_REFOCLK</a>, depending on what clock peripheral is available. Use <a class="el" href="clock_8h.html#ad3c75b0b9bb266e2110c060e26d29651">usBSP430clockACLK_Hz_ni()</a> to determine what the actual (nominal) speed is. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="af634a7a6fbaf23e799250ed9a02b7ce4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430clockConfigureACLK_ni </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="clock_8h.html#afad775d35ca969034172f0955cf1bcda">eBSP430clockSource</a>&#160;</td>
          <td class="paramname"><em>sel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure ACLK to a source clock.</p>
<p>The peripheral-specific implementation will configure ACLK to source from the requested clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sel</td><td>the source from which the clock should be selected. Note that the values permit an internal decision, e.g. to prefer LFXT1 but to use an alternative if that is faulted. Configuration is rejected if the requested clock source does not exist on the platform.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the configuration was accepted, a negative error if it was rejected. </dd></dl>

</div>
</div>
<a class="anchor" id="a11303f50d951e4d623afe1f656bda7a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430clockConfigureLFXT1_ni </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enablep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>loop_limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure (or deconfigure) XT1 as a clock source.</p>
<p>The peripheral-specific implementation will use <a class="el" href="platform_8h.html#a93f2e78617ceaeb548fe440e850924ce">iBSP430platformConfigurePeripheralPins_ni</a> with <a class="el" href="periph_8h.html#a2c2bb4eeb28cd74d0cc8071fabbbee57">BSP430_PERIPH_LFXT1</a> to configure the crystal. If crystal functionality has been requested, it then clears oscillator faults, delays <a class="el" href="clock_8h.html#af540b5147f5f33d64f3a81aed12d3a6d">BSP430_CLOCK_LFXT1_STABILIZATION_DELAY_CYCLES</a>, then detects whether the crystal is functioning. It terminates with success once the oscillator remains unfaulted after the delay, and otherwise repeats the clear/delay/check process as specified by <em>loop_limit</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enablep</td><td>Pass a nonzero value to configure XIN/XOUT for crystal functionality and to loop until the crystal is stabilized or has failed to stabilize. Pass a zero value to turn off the crystal function: this reconfigures pins to their digital port function, disables the crystal, and clears any crystal capacitance setting.</td></tr>
    <tr><td class="paramname">loop_limit</td><td>The number of times the stabilization check should be repeated. If stabilization has not been achieved after this many loops, assume the crystal is absent and configure for VLOCLK. A negative value indicates the process should loop until stabilization is detected. A zero value is equivalent to passing a zero value as <em>enablep</em>..</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zero if XT1 was disabled by the call, and a positive value if XT1 is stable on completion of the call (available as a clock source). A negative value indicates an error, such as inability to configure XIN/XOUT pins. Thus, the crystal is available and stable only if a positive value is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="a5e043a1d5544be98754de17482eb009f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430clockConfigureSMCLKDividingShift_ni </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shift_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure SMCLK by dividing MCLK.</p>
<p>The peripheral clock registers are configured to produce SMCLK from the same source as MCLK at a rate where SMCLK divides MCLK by a specified power of two. The range of supported shift values is specific to the peripheral. Where MCLK is itself divided, the underlying implementation will take that into account.</p>
<p>See also <a class="el" href="clock_8h.html#adfae913d448a6d5e70f9ed8f727f4afa">BSP430_CLOCK_NOMINAL_SMCLK_DIVIDING_SHIFT</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shift_pos</td><td>the number of bit positions by which the incoming clock is divided; e.g. a value of 2 produces /4.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="clock_8h.html#af4f11047b7504eab981af923a4a58036">iBSP430clockSMCLKDividingShift_ni()</a> as evaluated after the configuration is complete </dd></dl>

</div>
</div>
<a class="anchor" id="af4f11047b7504eab981af923a4a58036"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430clockSMCLKDividingShift_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the shift used to divide MCLK to produce SMCLK.</p>
<p>This is extracted from the peripheral-specific registers and accounts for any division by MCLK of a shared source clock.</p>
<dl class="section return"><dt>Returns</dt><dd>The power of 2 by which MCLK is divided to produce SMCLK. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2clocks_2main_8c-example.html#a14">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a538f01f39cf54267229fe04877d3185e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ulBSP430clockConfigureMCLK_ni </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>mclk_Hz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure MCLK to a desired frequency.</p>
<p>The peripheral-specific implementation will configure MCLK to a frequency as close as possible to the requested frequency. The actual frequency may be higher or lower than the requested one.</p>
<p>Peripheral-specific notes: </p>
<ul>
<li>
<p class="startli">The &lt;<a class="el" href="bc2_8h.html" title="Hardware presentation/abstraction for Basic Clock Module+ (BC2).">bsp430/periph/bc2.h</a>&gt; implementation (2xx family) is normally limited to the calibrated DCO values recorded within the MCU, which are a subset of 1 MHz, 8 MHz, 12 MHz, and 16 MHz. The peripheral will initially be configured to the closest available calibrated frequency. Where a crystal is available <a class="el" href="bc2_8h.html#a4cfe6f32391ffebb454ac32609505a80">configBSP430_BC2_TRIM_TO_MCLK</a> may be used to allow this routine to adjust the DCO to match the specific frequency as closely as possible. The invocation of <a class="el" href="bc2_8h.html#a761fecab60615a591909cef0bc74121b">iBSP430bc2TrimToMCLK_ni()</a> that is used to do this is inhibited if ACLK appears to derive from VLOCLK.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The &lt;<a class="el" href="fllplus_8h.html" title="Hardware presentation/abstraction for FLL Plus (FLLPLUS).">bsp430/periph/fllplus.h</a>&gt; implementation (4xx family) relies on presence of a stable LFXT1, and configures to the requested frequency.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The &lt;<a class="el" href="ucs_8h.html" title="Hardware presentation/abstraction for Unified Clock System (UCS).">bsp430/periph/ucs.h</a>&gt; implementation (5xx/6xx family) will set the configuration to the power-up defaults unless <a class="el" href="ucs_8h.html#a3b278cfc9dc95e656ea096c5263ed59e">BSP430_UCS_TRIM_DCOCLKDIV</a> is available. If it is, then any frequency supported by the MCU may be configured.</p>
<p class="endli"></p>
</li>
<li>
The &lt;<a class="el" href="cs_8h.html" title="Hardware presentation/abstraction for Clock System (CS).">bsp430/periph/cs.h</a>&gt; implementation (FR5xx family) will select the closest calibrated frequency supported by the MCU. There is no facility for adjusting this to an arbitrary frequency. </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Although passing <em>mclk_Hz</em> zero is a short-hand for using <a class="el" href="clock_8h.html#a24c49529cfa0ba1ada6819dfe6c5d68e">BSP430_CLOCK_PUC_MCLK_HZ</a>, the result may not be to restore the clock to its power-up configuration. To avoid manipulating the clocks during platform initialization, see <a class="el" href="platform_8h.html#a9ccb62d7259bf01a8d3d099359d0042a">BSP430_PLATFORM_BOOT_CONFIGURE_CLOCKS</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mclk_Hz</td><td>Desired frequency for the master clock, in Hz. If zero, <a class="el" href="clock_8h.html#a24c49529cfa0ba1ada6819dfe6c5d68e">BSP430_CLOCK_PUC_MCLK_HZ</a> is used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Configured frequency in Hz. This may be higher or lower than the requested frequency. </dd></dl>

</div>
</div>
<a class="anchor" id="a453c22edb5443469b217d43e4f5555cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long __inline__ ulBSP430clockMCLK_Hz </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Interruptible-preserving wrapper for <a class="el" href="clock_8h.html#a5d5257ff00b9fafcd86e4f5eaa73ee79">ulBSP430clockMCLK_Hz_ni</a> </p>

</div>
</div>
<a class="anchor" id="a5d5257ff00b9fafcd86e4f5eaa73ee79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ulBSP430clockMCLK_Hz_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the best available estimate of MCLK frequency.</p>
<p>Depending on clock capabilities, this may simply return <a class="el" href="clock_8h.html#a6ffd3f4fab35b64d0e8ff8d3179d69d9">BSP430_CLOCK_NOMINAL_MCLK_HZ</a>, or it may return a value calculated from observations.</p>
<dl class="section note"><dt>Note</dt><dd>This function will hang until any oscillator fault associated with the DCO or its peripheral-specific analogue has been cleared. If the clock configuration is not stable, this function may not return.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>an estimate of the MCLK frequency, in Hz </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a51">bootstrap/applpm/main.c</a>, and <a class="el" href="bootstrap_2clocks_2main_8c-example.html#a11">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ac6df48b7667e1268240ea5555fad1d9c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long __inline__ ulBSP430clockSMCLK_Hz </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Interruptible-preserving wrapper for <a class="el" href="clock_8h.html#a0a6941051abd2d3a18654b83ba1f9398">ulBSP430clockSMCLK_Hz_ni</a> </p>

</div>
</div>
<a class="anchor" id="a0a6941051abd2d3a18654b83ba1f9398"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long __inline__ ulBSP430clockSMCLK_Hz_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the best available estimate of SMCLK frequency.</p>
<p>This simply estimates MCLK then divides it based on the peripheral-specific divider. If clocks are configured through a mechanism other than <a class="el" href="clock_8h.html#a538f01f39cf54267229fe04877d3185e">ulBSP430clockConfigureMCLK_ni</a> assumptions made by the implementation may be incorrect.</p>
<dl class="section return"><dt>Returns</dt><dd>an estimate of the SMCLK frequency, in Hz </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a52">bootstrap/applpm/main.c</a>, <a class="el" href="bootstrap_2clocks_2main_8c-example.html#a15">bootstrap/clocks/main.c</a>, and <a class="el" href="sensors_2hh10d_2main_8c-example.html#a24">sensors/hh10d/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ad88e60e07be8bd774f7187da781023db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned short __inline__ usBSP430clockACLK_Hz </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Interruptible-preserving wrapper for <a class="el" href="clock_8h.html#ad3c75b0b9bb266e2110c060e26d29651">usBSP430clockACLK_Hz_ni()</a> </p>

</div>
</div>
<a class="anchor" id="ad3c75b0b9bb266e2110c060e26d29651"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short usBSP430clockACLK_Hz_ni </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the best available estimate of ACLK frequency.</p>
<p>Depending on clock configuration, this will return one of <a class="el" href="clock_8h.html#a7edeacce320b73a2f7de5d2a865a2802">BSP430_CLOCK_NOMINAL_XT1CLK_HZ</a>, <a class="el" href="clock_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a>, or another constant or possibly measured value.</p>
<p>A value of 0 may be returned if the clock is configured for an unidentified external source.</p>
<dl class="section note"><dt>Note</dt><dd>If the ACLK is configured to source from LFXT1 but <a class="el" href="clock_8h.html#a7a0cdc169aac90a5c877b3ca09a4608d">BSP430_CLOCK_LFXT1_IS_FAULTED_NI()</a> is true this will return <a class="el" href="clock_8h.html#ae2ace757e68c3bc4206f0ff4a3a39d13">BSP430_CLOCK_NOMINAL_VLOCLK_HZ</a> instead of <a class="el" href="clock_8h.html#a7edeacce320b73a2f7de5d2a865a2802">BSP430_CLOCK_NOMINAL_XT1CLK_HZ</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>an estimate of the ACLK frequency, in Hz </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a53">bootstrap/applpm/main.c</a>, and <a class="el" href="bootstrap_2clocks_2main_8c-example.html#a19">bootstrap/clocks/main.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 12 2012 04:49:26 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
