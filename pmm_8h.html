<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BSP430: include/bsp430/periph/pmm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20130327</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_b88edee3dd3c84f98132ff53401cb3f9.html">bsp430</a></li><li class="navelem"><a class="el" href="dir_9cb70b0f81efa0454c88900ecd971aae.html">periph</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pmm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Hardware presentation/abstraction for Power Management Module (PMM).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="periph_8h_source.html">bsp430/periph.h</a>&gt;</code><br/>
</div>
<p><a href="pmm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af9f6a1ab23247e37c030abdfef888798"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#af9f6a1ab23247e37c030abdfef888798">BSP430_MODULE_PMM</a></td></tr>
<tr class="separator:af9f6a1ab23247e37c030abdfef888798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ed8a8befdc42e680d77a22ce15fb62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a62ed8a8befdc42e680d77a22ce15fb62">BSP430_MODULE_PMM_FRAM</a></td></tr>
<tr class="separator:a62ed8a8befdc42e680d77a22ce15fb62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f7471bb2f76ad4c4173a9a4afa3055"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a77f7471bb2f76ad4c4173a9a4afa3055">BSP430_PMM_ENTER_LPMXp5_NI</a>()</td></tr>
<tr class="separator:a77f7471bb2f76ad4c4173a9a4afa3055"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abaec56228be231bba18d6edd8b505869"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#abaec56228be231bba18d6edd8b505869">vBSP430pmmInduceBOR</a> (void)</td></tr>
<tr class="separator:abaec56228be231bba18d6edd8b505869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168885116eb851452f51b7ce7ae1b3c5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#a168885116eb851452f51b7ce7ae1b3c5">vBSP430pmmInducePOR</a> (void)</td></tr>
<tr class="separator:a168885116eb851452f51b7ce7ae1b3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3621d45ad0e516384a5dce097dadba9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pmm_8h.html#ac3621d45ad0e516384a5dce097dadba9">iBSP430pmmSetCoreVoltageLevel_ni</a> (unsigned int target_level)</td></tr>
<tr class="separator:ac3621d45ad0e516384a5dce097dadba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hardware presentation/abstraction for Power Management Module (PMM). </p>
<p>The Power Management Module is present on 5xx/6xx/FR5xx devices, and has differences in FRAM devices that are not reflected by this interface.</p>
<h1><a class="anchor" id="h_periph_pmm_opt"></a>
Module Configuration Options</h1>
<p>None supported.</p>
<h1><a class="anchor" id="h_periph_pmm_hpl"></a>
Hardware Presentation Layer</h1>
<p>As there can be only one instance of PMM on any MCU, there is no structure supporting a PMM <a class="el" href="layer.html#HPL">HPL</a>. Manipulate the peripheral through its registers directly.</p>
<h1><a class="anchor" id="h_periph_pmm_hal"></a>
Hardware Adaptation Layer</h1>
<p>As there can be only one instance of PMM on any MCU, there is no structure supporting a PMM <a class="el" href="layer.html#HAL">HAL</a>.</p>
<p>Inline functions defined in this module support forcing processor resets that include a complete reset of all registers and peripherals.</p>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2013, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af9f6a1ab23247e37c030abdfef888798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_MODULE_PMM</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(defined(__MSP430_HAS_PMM__)          \</div>
<div class="line">                           || defined(__MSP430_HAS_PMM_FR5xx__) \</div>
<div class="line">                           || defined(__MSP430_HAS_PMM_FRAM__))</div>
</div><!-- fragment --><p>Defined on inclusion of &lt;<a class="el" href="pmm_8h.html" title="Hardware presentation/abstraction for Power Management Module (PMM).">bsp430/periph/pmm.h</a>&gt;. The value evaluates to true if the target MCU supports the Power Management Module, and false if it does not.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that permits its use only within C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="a62ed8a8befdc42e680d77a22ce15fb62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_MODULE_PMM_FRAM</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(defined(__MSP430_HAS_PMM_FR5xx__)       \</div>
<div class="line">                                || defined(__MSP430_HAS_PMM_FRAM__))</div>
</div><!-- fragment --><p>Defined on inclusion of &lt;<a class="el" href="pmm_8h.html" title="Hardware presentation/abstraction for Power Management Module (PMM).">bsp430/periph/pmm.h</a>&gt;. The value evaluates to true if the target MCU supports the FRAM version of the Power Management Module, and false if it does not.</p>
<dl class="section user"><dt>C Preprocessor Only:</dt><dd>This macro may have a value that permits its use only within C preprocessor conditional directives. </dd></dl>

</div>
</div>
<a class="anchor" id="a77f7471bb2f76ad4c4173a9a4afa3055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_PMM_ENTER_LPMXp5_NI</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {       \</div>
<div class="line">    PMMCTL0_H = PMMPW_H;                        \</div>
<div class="line">    PMMCTL0 = PMMPW | PMMREGOFF;                \</div>
<div class="line">    PMMCTL0_H = !PMMPW_H;                       \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Macro to enter LPMx.5 mode</p>
<p>This should be invoked when <a class="el" href="core_8h.html#ac98f22bd2238bfdadf9c7d2a7a8bcc8f">BSP430_CORE_LPM_LPMXp5</a> or some other cue indicates that ultra-low-power sleep is desired.</p>
<dl class="section note"><dt>Note</dt><dd>This macro is unavailable on 5xx/6xx chips for which PM5CTL0 is not provided by the MCU headers, possibly due to the presence of erratum PMM8. In particular, it is not available on the CC430F5137 used in the EM430 and SuRF platforms. User code can test whether the macro is defined in order to determine whether the feature is supported.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The implementation assumes that the PMM control registers are locked. The macro will unlock the registers, set the bit for LPMx.5, then lock the registers again. If used in a context where the PMM registers are already unlocked, this will probably not be what you want. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a63">bootstrap/applpm/main.c</a>.</dd>
</dl>
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac3621d45ad0e516384a5dce097dadba9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430pmmSetCoreVoltageLevel_ni </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>target_level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Safely adjust the PMM core voltage to a desired level.</p>
<p>This function gradually increases or decreases the PMM core voltage to the desired level, or as close to it as can be achieved. The implementation is from <a href="http://www.ti.com/tool/msp430ware">MSP430Ware</a>, and includes a workaround for erratum FLASH37. If supply voltage does not support the requested voltage, the closest attainable level will be configured and returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_level</td><td>The power level to be entered. This must be a valid level, i.e. <a class="el" href="msp430_8h.html#a34ca0e5c11c8b5df96c3c0897728ca8f">PMMCOREV_0</a> through <a class="el" href="msp430_8h.html#a4aa3f2a0135a48433168c58a596e88da">PMMCOREV_3</a>, or an error code is returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if the <code>target_level</code> is invalid, otherwise the level at which power is left. This may be less than <code>target_level</code> if the requested level could not be reached due to inadequate supply voltage.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is available only on non-FRAM 5xx PMM implementations. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="bootstrap_2applpm_2main_8c-example.html#a57">bootstrap/applpm/main.c</a>, <a class="el" href="platform_2exp430f5529_2fatfs_2main_8c-example.html#a11">platform/exp430f5529/fatfs/main.c</a>, and <a class="el" href="rfem_2cc3000_2main_8c-example.html#a33">rfem/cc3000/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="abaec56228be231bba18d6edd8b505869"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void vBSP430pmmInduceBOR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cause a brown-out reset </p>

</div>
</div>
<a class="anchor" id="a168885116eb851452f51b7ce7ae1b3c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> void vBSP430pmmInducePOR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Cause a power-on reset </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 27 2013 12:01:53 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
